# UI Specification v1

## Overview

This document specifies the user interface for the Portfolio Builder & Risk Analyzer. The UI is built with Streamlit (v1) with a planned React migration path.

### Design Principles

| Principle | Implementation |
|-----------|----------------|
| Bloomberg-inspired | Dark theme, data-dense but organized, professional financial aesthetic |
| Progressive disclosure | Presets visible, advanced options behind toggles |
| Workflow-oriented | Suggested sequential flow, but all sections accessible |
| Results-focused | Hide math, show plain-language explanations and visualizations |

### Technical Stack

- **Framework:** Streamlit 1.x
- **Charts:** Plotly (interactive)
- **Theme:** Dark mode (custom CSS)
- **Layout:** Single page with sidebar navigation
- **Target:** Desktop browsers (1280px+ width)

---

## Navigation Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] Portfolio Builder              [Refresh Data] [Export] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                                                  â”‚
â”‚  SIDEBAR     â”‚  MAIN CONTENT AREA                              â”‚
â”‚              â”‚                                                  â”‚
â”‚  Dashboard   â”‚  (Changes based on sidebar selection)           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                                                  â”‚
â”‚  Screening   â”‚                                                  â”‚
â”‚  Optimize    â”‚                                                  â”‚
â”‚  Portfolio   â”‚                                                  â”‚
â”‚  Monitor     â”‚                                                  â”‚
â”‚  Backtest    â”‚                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                                                  â”‚
â”‚  Settings    â”‚                                                  â”‚
â”‚              â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sidebar Sections

| Section | Purpose | Icon |
|---------|---------|------|
| Dashboard | Summary stats, quick actions | ðŸ“Š |
| Screening | Find diversifying assets | ðŸ” |
| Optimize | Build optimal portfolios | âš¡ |
| Portfolio | View current portfolio details | ðŸ’¼ |
| Monitor | Drift detection, alerts | ðŸ“¡ |
| Backtest | Historical simulations | ðŸ“ˆ |
| Settings | Universe management, data config | âš™ï¸ |

---

## Screen Specifications

### 1. Dashboard

**Purpose:** At-a-glance summary, entry point to workflows.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DASHBOARD                                          [Refresh]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ PORTFOLIO    â”‚ â”‚ DRIFT STATUS â”‚ â”‚ LAST UPDATE  â”‚            â”‚
â”‚  â”‚ $1,234,567   â”‚ â”‚ âœ“ In Range   â”‚ â”‚ 2 hours ago  â”‚            â”‚
â”‚  â”‚ +2.4% MTD    â”‚ â”‚ 0 breaches   â”‚ â”‚ Auto: 6:00AM â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ALLOCATION                  â”‚ â”‚ RISK METRICS               â”‚â”‚
â”‚  â”‚ [Pie chart - weights]       â”‚ â”‚ VaR 95%: -2.1%             â”‚â”‚
â”‚  â”‚                             â”‚ â”‚ Vol: 12.4%                 â”‚â”‚
â”‚  â”‚                             â”‚ â”‚ Sharpe: 0.82               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ QUICK ACTIONS                                               â”‚â”‚
â”‚  â”‚ [Run Screening] [Re-optimize] [Check Drift] [New Backtest] â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ RECENT ACTIVITY                                             â”‚â”‚
â”‚  â”‚ â€¢ Optimization completed - 2 hours ago                      â”‚â”‚
â”‚  â”‚ â€¢ Drift check passed - 1 day ago                           â”‚â”‚
â”‚  â”‚ â€¢ Backtest "Q4 Tangency" completed - 3 days ago            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**

| Component | Type | Data Source |
|-----------|------|-------------|
| Portfolio Value Card | Metric card | Latest holdings snapshot Ã— current prices |
| Drift Status Card | Status card | Latest drift check |
| Last Update Card | Info card | price_bars.pulled_at |
| Allocation Chart | Plotly pie | optimization_weights |
| Risk Metrics Card | Expandable card | optimization_results |
| Quick Actions | Button group | Navigation triggers |
| Recent Activity | List | Aggregated from runs tables |

**Interactions:**
- Cards are clickable â†’ navigate to relevant section
- Quick action buttons â†’ navigate to workflow with action pre-selected
- Refresh button â†’ triggers manual data ingest

---

### 2. Screening

**Purpose:** Score candidate assets against reference portfolio, select for promotion.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SCREENING                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  CONFIGURATION                                      [Advanced â–¼]â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Reference: [Current Holdings â–¼]  Candidates: [ETF Pool â–¼]  â”‚â”‚
â”‚  â”‚ Assumption Set: [2024-01 Daily Historical â–¼]                â”‚â”‚
â”‚  â”‚                                            [Run Screening]  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  RESULTS                               [List View] [Compare â—‰] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Rank â”‚ Ticker â”‚ Score â”‚ Corr â”‚ VolRed â”‚ Gap â”‚ HHI â”‚ Select â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚  1   â”‚ GLD    â”‚ 0.87  â”‚ 0.92 â”‚ 0.81   â”‚ 1.0 â”‚ 0.76â”‚  [âœ“]  â”‚â”‚
â”‚  â”‚  2   â”‚ TLT    â”‚ 0.79  â”‚ 0.85 â”‚ 0.72   â”‚ 0.5 â”‚ 0.68â”‚  [ ]  â”‚â”‚
â”‚  â”‚  3   â”‚ VWO    â”‚ 0.71  â”‚ 0.78 â”‚ 0.65   â”‚ 0.5 â”‚ 0.61â”‚  [ ]  â”‚â”‚
â”‚  â”‚ ...  â”‚        â”‚       â”‚      â”‚        â”‚     â”‚     â”‚       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  EXPLANATION (GLD selected)                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ "Adding GLD would reduce average pairwise correlation from â”‚â”‚
â”‚  â”‚  0.72 to 0.61 and increase effective N from 3.2 to 4.1.   â”‚â”‚
â”‚  â”‚  Gold fills the commodity asset class, currently absent    â”‚â”‚
â”‚  â”‚  from your portfolio."                                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  SELECTED: 2 assets                     [Add to Universe â†’]    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Advanced Panel (collapsed by default):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Signal Weights           Nominal Add Weight                    â”‚
â”‚  Correlation: [0.40 â†â†’]   [5% â†â†’]                              â”‚
â”‚  Vol Reduction: [0.30 â†â†’]                                       â”‚
â”‚  Sector Gap: [0.15 â†â†’]                                          â”‚
â”‚  HHI: [0.15 â†â†’]                                                 â”‚
â”‚                           [Reset to Defaults]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Compare View (toggle):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPARE CANDIDATES                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ GLD               â”‚ â”‚ TLT               â”‚ â”‚ [+ Add]        â”‚â”‚
â”‚  â”‚ Gold ETF          â”‚ â”‚ 20+ Year Treasury â”‚ â”‚                â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚                â”‚â”‚
â”‚  â”‚ Composite: 0.87   â”‚ â”‚ Composite: 0.79   â”‚ â”‚                â”‚â”‚
â”‚  â”‚ Correlation: 0.92 â”‚ â”‚ Correlation: 0.85 â”‚ â”‚                â”‚â”‚
â”‚  â”‚ Vol Red: 0.81     â”‚ â”‚ Vol Red: 0.72     â”‚ â”‚                â”‚â”‚
â”‚  â”‚ Gap: 1.0          â”‚ â”‚ Gap: 0.5          â”‚ â”‚                â”‚â”‚
â”‚  â”‚ HHI: 0.76         â”‚ â”‚ HHI: 0.68         â”‚ â”‚                â”‚â”‚
â”‚  â”‚                   â”‚ â”‚                   â”‚ â”‚                â”‚â”‚
â”‚  â”‚ Class: Commodity  â”‚ â”‚ Class: Fixed Inc  â”‚ â”‚                â”‚â”‚
â”‚  â”‚ Sector: â€”         â”‚ â”‚ Sector: â€”         â”‚ â”‚                â”‚â”‚
â”‚  â”‚                   â”‚ â”‚                   â”‚ â”‚                â”‚â”‚
â”‚  â”‚ [Select]          â”‚ â”‚ [Select]          â”‚ â”‚                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Interactions:**
- Click row â†’ show explanation below table
- Click checkbox or row â†’ toggle selection
- Toggle List/Compare â†’ switch view modes
- "Add to Universe" â†’ inline universe selector, then navigate to Optimize

---

### 3. Optimize

**Purpose:** Run portfolio optimization, configure constraints, view results.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OPTIMIZE                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  CONFIGURATION                                      [Advanced â–¼]â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Universe: [US Core ETFs â–¼]                                  â”‚â”‚
â”‚  â”‚ Assumption Set: [2024-01 Daily Historical â–¼]                â”‚â”‚
â”‚  â”‚ Objective: ( ) Min Variance  (â—) Max Sharpe  ( ) Frontier   â”‚â”‚
â”‚  â”‚ Preset: [Long-only Conservative â–¼]                          â”‚â”‚
â”‚  â”‚                                              [Run Optimize] â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  RESULTS                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ EFFICIENT FRONTIER           â”‚ â”‚ PORTFOLIO SUMMARY          â”‚â”‚
â”‚  â”‚                              â”‚ â”‚                            â”‚â”‚
â”‚  â”‚    *  â† Tangency             â”‚ â”‚ Expected Return: 8.2%      â”‚â”‚
â”‚  â”‚   / \                        â”‚ â”‚ Volatility: 12.4%          â”‚â”‚
â”‚  â”‚  /   \                       â”‚ â”‚ Sharpe: 0.66               â”‚â”‚
â”‚  â”‚ *     \  â† MVP               â”‚ â”‚ Effective N: 4.2           â”‚â”‚
â”‚  â”‚        \                     â”‚ â”‚                            â”‚â”‚
â”‚  â”‚ [Plotly scatter]             â”‚ â”‚ [View Explanation]         â”‚â”‚
â”‚  â”‚                              â”‚ â”‚                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ WEIGHTS                      â”‚ â”‚ RISK CONTRIBUTION          â”‚â”‚
â”‚  â”‚ [Horizontal bar chart]       â”‚ â”‚ [Horizontal bar chart]     â”‚â”‚
â”‚  â”‚                              â”‚ â”‚                            â”‚â”‚
â”‚  â”‚ VTI â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 35%        â”‚ â”‚ VTI â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 42%         â”‚â”‚
â”‚  â”‚ BND â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 25%            â”‚ â”‚ BND â–ˆâ–ˆâ–ˆâ–ˆ 15%               â”‚â”‚
â”‚  â”‚ VEA â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 20%              â”‚ â”‚ VEA â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 23%             â”‚â”‚
â”‚  â”‚ GLD â–ˆâ–ˆâ–ˆâ–ˆ 12%                â”‚ â”‚ GLD â–ˆâ–ˆâ–ˆ 12%                â”‚â”‚
â”‚  â”‚ TLT â–ˆâ–ˆâ–ˆ 8%                  â”‚ â”‚ TLT â–ˆâ–ˆ 8%                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚                                    [Save as Target] [Export]    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Advanced Panel:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONSTRAINTS                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [ ] Long-only          Max Weight: [20% â†â”€â”€â†’]               â”‚â”‚
â”‚  â”‚ [ ] Allow shorting     Min Weight: [0% â†â”€â”€â†’]                â”‚â”‚
â”‚  â”‚ [ ] Leverage cap       Leverage: [1.0 â†â”€â”€â†’]                 â”‚â”‚
â”‚  â”‚ [ ] Turnover cap       Turnover: [â€” Not set â€”]              â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ Per-Asset Overrides:                                         â”‚â”‚
â”‚  â”‚ VTI: Min [0%] Max [40%]                        [+ Add Rule] â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  TARGET RETURN (for Frontier Point)                             â”‚
â”‚  [â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€] 8.0%                                   â”‚
â”‚  Min: 4.2%                Max: 12.1%                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Frontier Interaction:**
- Hover point â†’ tooltip with return, vol, Sharpe
- Click point â†’ populate weights table with that portfolio
- MVP and Tangency points highlighted with distinct markers/colors

**Infeasible State:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ OPTIMIZATION INFEASIBLE                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ "Target return of 11% exceeds maximum achievable return    â”‚â”‚
â”‚  â”‚  of 8.4% under long-only constraints."                      â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ Suggestions:                                                 â”‚â”‚
â”‚  â”‚ â€¢ Lower target return to â‰¤8.4%                              â”‚â”‚
â”‚  â”‚ â€¢ Allow shorting to expand feasible region                  â”‚â”‚
â”‚  â”‚ â€¢ Add higher-return assets to universe                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. Portfolio

**Purpose:** Detailed view of current portfolio with all visualizations and metrics.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PORTFOLIO                            [As of: 2024-01-15 â–¼]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ALLOCATION          â”‚ RISK CONTRIBUTION   â”‚ CORRELATION     â”‚â”‚
â”‚  â”‚ [Pie chart]         â”‚ [Bar chart]         â”‚ [Heatmap]       â”‚â”‚
â”‚  â”‚                     â”‚                     â”‚                 â”‚â”‚
â”‚  â”‚                     â”‚                     â”‚   VTI BND VEA   â”‚â”‚
â”‚  â”‚                     â”‚                     â”‚ VTI 1.0 0.2 0.8 â”‚â”‚
â”‚  â”‚                     â”‚                     â”‚ BND 0.2 1.0 0.1 â”‚â”‚
â”‚  â”‚                     â”‚                     â”‚ VEA 0.8 0.1 1.0 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  HOLDINGS                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Ticker â”‚ Name          â”‚ Weight â”‚ MCR   â”‚ CRC   â”‚ PRC      â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ VTI    â”‚ Total Stock   â”‚ 35.0%  â”‚ 0.052 â”‚ 0.018 â”‚ 42.1%    â”‚â”‚
â”‚  â”‚ BND    â”‚ Total Bond    â”‚ 25.0%  â”‚ 0.021 â”‚ 0.005 â”‚ 12.3%    â”‚â”‚
â”‚  â”‚ VEA    â”‚ Developed Intlâ”‚ 20.0%  â”‚ 0.048 â”‚ 0.010 â”‚ 22.8%    â”‚â”‚
â”‚  â”‚ GLD    â”‚ Gold          â”‚ 12.0%  â”‚ 0.041 â”‚ 0.005 â”‚ 11.5%    â”‚â”‚
â”‚  â”‚ TLT    â”‚ Long Treasury â”‚  8.0%  â”‚ 0.058 â”‚ 0.005 â”‚ 11.3%    â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ TOTAL  â”‚               â”‚ 100.0% â”‚       â”‚ 0.043 â”‚ 100.0%   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  RISK METRICS                                         [Expand â–¼]â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ VaR 95%      â”‚ â”‚ CVaR 95%     â”‚ â”‚ Max Drawdown â”‚ â”‚ Vol      â”‚â”‚
â”‚  â”‚ -2.1%        â”‚ â”‚ -3.4%        â”‚ â”‚ -18.2%       â”‚ â”‚ 12.4%    â”‚â”‚
â”‚  â”‚ daily        â”‚ â”‚ daily        â”‚ â”‚ 2022-09      â”‚ â”‚ annual   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  SCENARIO STRESS TESTS                              [+ Custom]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Scenario             â”‚ Impact    â”‚ Status                   â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ Equity Crash -30%    â”‚ -12.4%    â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ Moderate      â”‚â”‚
â”‚  â”‚ Rate Spike +200bps   â”‚ -4.2%     â”‚ â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ Low           â”‚â”‚
â”‚  â”‚ Inflation +3%        â”‚ -1.8%     â”‚ â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Low           â”‚â”‚
â”‚  â”‚ 2008 Replay          â”‚ -22.1%    â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ High          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Risk Metrics Expanded:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RISK METRICS (Expanded)                             [Collapse] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    â”‚ 95% Confidence â”‚ 99% Confidence        â”‚â”‚
â”‚  â”‚ VaR (daily)        â”‚ -2.1%          â”‚ -3.2%                 â”‚â”‚
â”‚  â”‚ CVaR (daily)       â”‚ -3.4%          â”‚ -4.8%                 â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ Drawdown Analysis                                            â”‚â”‚
â”‚  â”‚ [Drawdown time series chart]                                 â”‚â”‚
â”‚  â”‚ Max: -18.2% (Sep 2022)  Avg: -4.1%  Current: -2.3%          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5. Monitor

**Purpose:** Drift detection dashboard, rebalancing triggers.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MONITOR                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  DRIFT STATUS                                      [Check Now]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Last Check: 2024-01-15 09:00    Threshold: Â±5%              â”‚â”‚
â”‚  â”‚ Target From: Optimization 2024-01-01                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  ALERTS                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âš ï¸ VTI BREACH                 â”‚ â”‚ âœ“ BND In Range           â”‚â”‚
â”‚  â”‚ Target: 35.0%                 â”‚ â”‚ Target: 25.0%             â”‚â”‚
â”‚  â”‚ Current: 41.2%                â”‚ â”‚ Current: 23.8%            â”‚â”‚
â”‚  â”‚ Drift: +6.2%                  â”‚ â”‚ Drift: -1.2%              â”‚â”‚
â”‚  â”‚                               â”‚ â”‚                           â”‚â”‚
â”‚  â”‚ "VTI has grown from 35% to   â”‚ â”‚                           â”‚â”‚
â”‚  â”‚  41.2% due to price          â”‚ â”‚                           â”‚â”‚
â”‚  â”‚  appreciation since last     â”‚ â”‚                           â”‚â”‚
â”‚  â”‚  rebalance."                 â”‚ â”‚                           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âœ“ VEA In Range               â”‚ â”‚ âœ“ GLD In Range            â”‚â”‚
â”‚  â”‚ Target: 20.0%                 â”‚ â”‚ Target: 12.0%             â”‚â”‚
â”‚  â”‚ Current: 18.1%                â”‚ â”‚ Current: 10.4%            â”‚â”‚
â”‚  â”‚ Drift: -1.9%                  â”‚ â”‚ Drift: -1.6%              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  DRIFT HISTORY                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [Line chart: drift per asset over time]                     â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ â”€â”€â”€ VTI  â”€â”€â”€ BND  â”€â”€â”€ VEA  â”€â”€â”€ GLD                          â”‚â”‚
â”‚  â”‚ --- Threshold bands (Â±5%)                                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  ACTIONS                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ 1 breach detected.                                          â”‚â”‚
â”‚  â”‚ [Rebalance Now â†’] [Adjust Threshold] [Ignore Until...]     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Alert Card States:**

| State | Color | Icon |
|-------|-------|------|
| Breach | Red/Orange | âš ï¸ |
| In Range | Green | âœ“ |
| Warning (>80% of threshold) | Yellow | âš¡ |

**Interactions:**
- "Check Now" â†’ runs drift check against current prices
- "Rebalance Now" â†’ navigates to Optimize with turnover constraint pre-configured
- Click alert card â†’ expands explanation

---

### 6. Backtest

**Purpose:** Configure and run backtests, compare strategies.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKTEST                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  CONFIGURATION                                      [Advanced â–¼]â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Universe: [US Core ETFs â–¼]  Benchmark: [SPY â–¼]              â”‚â”‚
â”‚  â”‚ Strategy: [Tangency Rebalance â–¼]                            â”‚â”‚
â”‚  â”‚ Period: [2019-01-01] to [2024-01-01]                        â”‚â”‚
â”‚  â”‚ Preset: [Monthly Rebalance, 10bps cost â–¼]                   â”‚â”‚
â”‚  â”‚                                                [Run Backtest]â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  RESULTS                          [+ Add Comparison Backtest]   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ CUMULATIVE RETURN                                           â”‚â”‚
â”‚  â”‚ [Line chart: portfolio vs benchmark]                        â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ â”€â”€â”€ Portfolio (Tangency)                                    â”‚â”‚
â”‚  â”‚ â”€â”€â”€ Benchmark (SPY)                                         â”‚â”‚
â”‚  â”‚ --- Equal Weight                                             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ DRAWDOWN                   â”‚ â”‚ ROLLING SHARPE (1Y)          â”‚â”‚
â”‚  â”‚ [Area chart]               â”‚ â”‚ [Line chart]                 â”‚â”‚
â”‚  â”‚                            â”‚ â”‚                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  SUMMARY                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              â”‚ Portfolio â”‚ Benchmark â”‚ Difference           â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ Total Return â”‚ +82.4%    â”‚ +71.2%    â”‚ +11.2%               â”‚â”‚
â”‚  â”‚ Ann. Return  â”‚ +12.8%    â”‚ +11.3%    â”‚ +1.5%                â”‚â”‚
â”‚  â”‚ Ann. Vol     â”‚ 14.2%     â”‚ 18.7%     â”‚ -4.5%                â”‚â”‚
â”‚  â”‚ Sharpe       â”‚ 0.90      â”‚ 0.60      â”‚ +0.30                â”‚â”‚
â”‚  â”‚ Max Drawdown â”‚ -18.2%    â”‚ -33.9%    â”‚ +15.7%               â”‚â”‚
â”‚  â”‚ Track. Error â”‚ 8.4%      â”‚ â€”         â”‚                      â”‚â”‚
â”‚  â”‚ Info. Ratio  â”‚ 0.18      â”‚ â€”         â”‚                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ SURVIVORSHIP BIAS NOTE                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ This backtest uses current universe composition. Assets    â”‚â”‚
â”‚  â”‚ that were delisted during the period are not included.     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚                                                      [Export]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Advanced Panel:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Rebalance Frequency: ( ) Monthly (â—) Quarterly ( ) Threshold  â”‚
â”‚  Threshold Drift: [5% â†â”€â”€â†’] (if threshold selected)            â”‚
â”‚  Lookback Window: [252 â†â”€â”€â†’] trading days                      â”‚
â”‚  Transaction Cost: [10 â†â”€â”€â†’] bps                               â”‚
â”‚                                                                 â”‚
â”‚  Constraints: [Same as Optimize section]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Comparison Mode:**
- "Add Comparison" â†’ select another saved backtest
- Charts overlay multiple series with distinct colors
- Summary table adds columns for each backtest

---

### 7. Settings

**Purpose:** Universe management, data configuration, preferences.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SETTINGS                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  UNIVERSES                                          [+ Create]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Name           â”‚ Type      â”‚ Assets â”‚ Actions               â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ US Core ETFs   â”‚ Active    â”‚ 8      â”‚ [Edit] [Delete]       â”‚â”‚
â”‚  â”‚ ETF Pool       â”‚ Candidate â”‚ 127    â”‚ [Edit] [Delete]       â”‚â”‚
â”‚  â”‚ Fixed Income   â”‚ Active    â”‚ 5      â”‚ [Edit] [Delete]       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  CURRENT HOLDINGS                                   [+ Snapshot]â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Label             â”‚ Date       â”‚ Assets â”‚ Actions           â”‚â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ Brokerage Account â”‚ 2024-01-15 â”‚ 5      â”‚ [View] [Delete]   â”‚â”‚
â”‚  â”‚ IRA               â”‚ 2024-01-10 â”‚ 3      â”‚ [View] [Delete]   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  DATA REFRESH                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Schedule: [Daily at 6:00 AM â–¼]                              â”‚â”‚
â”‚  â”‚ Last Refresh: 2024-01-15 06:00 (Success)                    â”‚â”‚
â”‚  â”‚ Data Vendor: Polygon                                         â”‚â”‚
â”‚  â”‚                                        [Refresh Now] [Logs] â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  EXPORT DEFAULTS                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Default Format: [PDF â–¼]                                     â”‚â”‚
â”‚  â”‚ Include Sections:                                            â”‚â”‚
â”‚  â”‚ [âœ“] Executive Summary    [âœ“] Holdings Table                 â”‚â”‚
â”‚  â”‚ [âœ“] Risk Metrics         [âœ“] Charts                         â”‚â”‚
â”‚  â”‚ [ ] Raw Data             [âœ“] Assumptions                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Create Universe Modal:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREATE UNIVERSE                                           [X]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Name: [________________________]                            â”‚â”‚
â”‚  â”‚ Type: (â—) Active  ( ) Candidate Pool                        â”‚â”‚
â”‚  â”‚ Description: [___________________________________]          â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ Add Assets:                                                  â”‚â”‚
â”‚  â”‚ [Search ticker... ] [+ Add]                                 â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ Selected:                                                    â”‚â”‚
â”‚  â”‚ VTI - Vanguard Total Stock Market         [Ã—]               â”‚â”‚
â”‚  â”‚ BND - Vanguard Total Bond Market          [Ã—]               â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚                              [Cancel] [Create Universe]      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Holdings Snapshot Form:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREATE HOLDINGS SNAPSHOT                                  [X]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Label: [________________________]                           â”‚â”‚
â”‚  â”‚ Date: [2024-01-15]                                          â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ Positions:                                                   â”‚â”‚
â”‚  â”‚ Ticker     Weight (%)                                        â”‚â”‚
â”‚  â”‚ [VTI    ]  [35.0     ]  [Ã—]                                 â”‚â”‚
â”‚  â”‚ [BND    ]  [25.0     ]  [Ã—]                                 â”‚â”‚
â”‚  â”‚ [VEA    ]  [20.0     ]  [Ã—]                                 â”‚â”‚
â”‚  â”‚ [GLD    ]  [12.0     ]  [Ã—]                                 â”‚â”‚
â”‚  â”‚ [TLT    ]  [8.0      ]  [Ã—]                                 â”‚â”‚
â”‚  â”‚ [+ Add Position]                                             â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ Total: 100.0% âœ“                                             â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚                                  [Cancel] [Save Snapshot]    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## User Flows

### Flow 1: New User Setup

```mermaid
flowchart TD
    A[Open App] --> B[Dashboard - Empty State]
    B --> C[Prompt: Create Universe]
    C --> D[Settings: Create Universe Form]
    D --> E[Add tickers]
    E --> F[Save Universe]
    F --> G[Prompt: Add Holdings]
    G --> H[Settings: Create Snapshot Form]
    H --> I[Enter positions]
    I --> J[Save Snapshot]
    J --> K[Prompt: Build Assumptions]
    K --> L[Auto-ingest prices]
    L --> M[Generate Assumption Set]
    M --> N[Dashboard - Populated]
```

### Flow 2: Screening to Optimization

```mermaid
flowchart TD
    A[Dashboard] --> B[Click: Run Screening]
    B --> C[Screening Page]
    C --> D[Select Reference + Candidates]
    D --> E[Run Screening]
    E --> F[Review Results]
    F --> G{Compare?}
    G -->|Yes| H[Toggle Compare View]
    H --> I[Side-by-side]
    I --> J[Select Assets]
    G -->|No| J
    J --> K[Click: Add to Universe]
    K --> L[Universe Selector]
    L --> M[Assets Added]
    M --> N[Navigate to Optimize]
    N --> O[Run Optimization]
    O --> P[Review Results]
    P --> Q[Save as Target]
```

### Flow 3: Drift Check to Rebalance

```mermaid
flowchart TD
    A[Dashboard] --> B[Drift Status Card]
    B --> C{Breach?}
    C -->|No| D[No Action]
    C -->|Yes| E[Click Card]
    E --> F[Monitor Page]
    F --> G[Review Alert Cards]
    G --> H{Rebalance?}
    H -->|No| I[Adjust Threshold or Ignore]
    H -->|Yes| J[Click: Rebalance Now]
    J --> K[Optimize Page]
    K --> L[Pre-filled Turnover Constraint]
    L --> M[Run Optimization]
    M --> N[New Target Weights]
```

---

## Component Library

### Cards

| Type | Usage | States |
|------|-------|--------|
| Metric Card | Single KPI display | Normal, Loading |
| Status Card | Binary status | Success (green), Warning (yellow), Error (red) |
| Alert Card | Drift/breach notification | Breach, Warning, OK |
| Expandable Card | Detailed metrics | Collapsed, Expanded |

### Tables

| Type | Features |
|------|----------|
| Data Table | Sortable columns, row selection, pagination |
| Comparison Table | Side-by-side columns, diff highlighting |
| Summary Table | Aggregated rows, conditional formatting |

### Charts (Plotly)

| Chart | Usage | Config |
|-------|-------|--------|
| Pie | Weight allocation | Interactive legend, hover details |
| Horizontal Bar | Weights, risk contribution | Sorted descending |
| Heatmap | Correlation matrix | Diverging color scale (-1 to +1) |
| Scatter | Efficient frontier | Clickable points, highlighted markers |
| Line | Time series (backtest, drift) | Multi-series, zoom, pan |
| Area | Drawdown | Filled below zero |

### Forms

| Element | Usage |
|---------|-------|
| Dropdown | Universe selection, presets |
| Slider | Numeric constraints, weights |
| Toggle | View modes, advanced panel |
| Date Picker | Backtest range, snapshot date |
| Ticker Search | Autocomplete with asset lookup |

### Feedback

| Type | Trigger |
|------|---------|
| Toast | Async operation complete |
| Inline Error | Validation failure |
| Loading Spinner | During computation |
| Progress Bar | Long-running jobs (backtest) |
| Empty State | No data, with CTA |

---

## Visual Design

### Color Palette (Dark Mode)

| Role | Color | Usage |
|------|-------|-------|
| Background | `#0e1117` | Page background |
| Surface | `#1a1f2c` | Cards, panels |
| Surface Elevated | `#262d3d` | Modals, dropdowns |
| Border | `#3d4663` | Dividers, outlines |
| Text Primary | `#fafafa` | Headings, body |
| Text Secondary | `#8b949e` | Labels, captions |
| Accent | `#58a6ff` | Links, selected items |
| Success | `#3fb950` | Positive values, OK status |
| Warning | `#d29922` | Alerts, caution |
| Error | `#f85149` | Breaches, errors |
| Chart 1 | `#58a6ff` | Primary series |
| Chart 2 | `#3fb950` | Secondary series |
| Chart 3 | `#d29922` | Tertiary series |
| Chart 4 | `#a371f7` | Quaternary series |

### Typography

| Element | Font | Size | Weight |
|---------|------|------|--------|
| Page Title | System Sans | 24px | 600 |
| Section Header | System Sans | 18px | 600 |
| Card Title | System Sans | 14px | 600 |
| Body | System Sans | 14px | 400 |
| Table Data | System Mono | 13px | 400 |
| Caption | System Sans | 12px | 400 |

### Spacing

| Size | Value | Usage |
|------|-------|-------|
| xs | 4px | Inline elements |
| sm | 8px | Related items |
| md | 16px | Card padding |
| lg | 24px | Section gaps |
| xl | 32px | Page margins |

### Layout Grid

- Sidebar: 240px fixed
- Content: Fluid, max 1400px
- Card grid: 2-3 columns responsive
- Gutters: 16px

---

## Export Functionality

### PDF Report Sections

| Section | Contents | Optional |
|---------|----------|----------|
| Executive Summary | Key metrics, status | No |
| Portfolio Holdings | Weights table, allocation chart | No |
| Risk Analysis | VaR, CVaR, drawdown, scenarios | Yes |
| Screening Rationale | Top candidates, explanations | Yes |
| Backtest Results | Performance charts, summary | Yes |
| Assumptions | Universe, lookback, estimators | Yes |

### Excel Workbook Tabs

| Tab | Contents |
|-----|----------|
| Summary | Key metrics |
| Holdings | Weights, MCR, CRC, PRC |
| Covariance | Full matrix |
| Screening | All scores |
| Backtest | Time series data |
| Assumptions | Parameters |

### Export Flow

```mermaid
flowchart LR
    A[Click Export] --> B[Section Selector Modal]
    B --> C[Check desired sections]
    C --> D[Select Format]
    D --> E{Format?}
    E -->|PDF| F[Generate PDF]
    E -->|Excel| G[Generate XLSX]
    F --> H[Download]
    G --> H
```

---

## Loading & Error States

### Loading States

| Context | Display |
|---------|---------|
| Page load | Skeleton cards |
| Table load | Skeleton rows |
| Chart load | Spinner overlay |
| Action button | Button spinner + disable |
| Background refresh | Subtle indicator in header |

### Error States

| Context | Display |
|---------|---------|
| API error | Toast with retry option |
| Validation | Inline field error |
| Infeasible optimization | Dedicated panel with explanation |
| Empty data | Empty state with CTA |
| Network offline | Banner with reconnect status |

### Empty States

| Context | Message | CTA |
|---------|---------|-----|
| No universes | "Create your first universe to get started" | [Create Universe] |
| No holdings | "Add your current holdings to enable screening" | [Add Holdings] |
| No optimizations | "Run an optimization to see your portfolio" | [Go to Optimize] |
| No backtests | "Run a backtest to evaluate strategies" | [New Backtest] |

---

## Accessibility Notes

- All interactive elements keyboard accessible
- Color not sole indicator (icons + text for status)
- Chart data available in table form
- Sufficient contrast ratios (WCAG AA)
- Focus indicators visible

---

## Streamlit Implementation Notes

### Page Structure

```python
# app.py
import streamlit as st

st.set_page_config(
    page_title="Portfolio Builder",
    layout="wide",
    initial_sidebar_state="expanded"
)

# Load custom CSS for dark theme
st.markdown(open("style.css").read(), unsafe_allow_html=True)

# Sidebar navigation
page = st.sidebar.radio(
    "Navigation",
    ["Dashboard", "Screening", "Optimize", "Portfolio", "Monitor", "Backtest", "Settings"]
)

# Route to page
if page == "Dashboard":
    from pages import dashboard
    dashboard.render()
# ... etc
```

### State Management

```python
# Use session_state for:
# - Selected universe
# - Current assumption set
# - Latest optimization run
# - User preferences

if "selected_universe" not in st.session_state:
    st.session_state.selected_universe = None
```

### API Integration

```python
# Use httpx for async API calls
import httpx

async def run_screening(request: dict) -> dict:
    async with httpx.AsyncClient() as client:
        response = await client.post(
            "http://localhost:8000/commands/screening",
            json=request
        )
        return response.json()
```

### Custom Components

For features Streamlit doesn't support natively:
- Clickable Plotly points â†’ use `plotly_events` component
- Complex modals â†’ use `streamlit-modal`
- Better tables â†’ use `st-aggrid`

---

## React Migration Path

When ready to migrate:

1. **API layer stays identical** â€” React consumes same endpoints
2. **Component mapping:**
   - Streamlit `st.metric` â†’ React card component
   - Streamlit `st.plotly_chart` â†’ React + Plotly.js
   - Streamlit `st.dataframe` â†’ React Table / AG Grid
3. **State management:** Zustand or Redux for global state
4. **Styling:** Tailwind with custom dark theme
5. **Routing:** React Router matching sidebar structure